{"remainingRequest":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Дмитрий\\Desktop\\kt-homework\\src\\views\\Interesting.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\src\\views\\Interesting.vue","mtime":1586973403603},{"path":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1586883801482},{"path":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\node_modules\\babel-loader\\lib\\index.js","mtime":1586883800678},{"path":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1586883801482},{"path":"C:\\Users\\Дмитрий\\Desktop\\kt-homework\\node_modules\\vue-loader\\lib\\index.js","mtime":1586883832454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYm90dG9tIGZyb20gIkAvY29tcG9uZW50cy9Cb3R0b20udnVlIjsNCmltcG9ydCBzZWFyY2hQYW5lbCBmcm9tICJAL2NvbXBvbmVudHMvc2VhcmNoUGFuZWwudnVlIjsNCmltcG9ydCBpbnRlcmVzdHNQYW5lbCBmcm9tICJAL2NvbXBvbmVudHMvaW50ZXJlc3RzUGFuZWwudnVlIjsNCmltcG9ydCBsb2FkZXIgZnJvbSAiQC9jb21wb25lbnRzL2xvYWRlci52dWUiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzY3JvbGxZOiAwLA0KICAgICAgc2Nyb2xsTm93OiAwLA0KICAgICAgZmV0Y2hpbmc6IHRydWUsDQogICAgICBwYW5lbFNob3duOiB0cnVlLA0KICAgICAgY291bnQ6IDI1LA0KICAgICAgc2VsZWN0ZWRJbnQ6ICIiLA0KICAgICAgb2Zmc2V0OiAwLA0KICAgICAgc2VhcmNoVGV4dDogItCi0LXRgdGCIiwNCiAgICAgIHBlc0hlYWRlcnM6IHsNCiAgICAnT2NwLUFwaW0tU3Vic2NyaXB0aW9uLUtleScgOiAnMjAzN2NjOTk4NWJlNDI5MmEzYWFlN2YxMmNhZmU0MjMnLA0KICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBpbWdzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuaW1nczsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBwaWNrSW50ZXJlc3QoaW50ZXJlc3QpIHsNCiAgICAgIHRoaXMuZmV0Y2hpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RlZEludCA9IGludGVyZXN0Ow0KICAgICAgYXhpb3MuZ2V0KGBodHRwczovL2FwaS5jb2duaXRpdmUubWljcm9zb2Z0LmNvbS9iaW5nL3Y3LjAvaW1hZ2VzL3NlYXJjaD9xPWANCiAgICAgICtlbmNvZGVVUklDb21wb25lbnQoaW50ZXJlc3QpDQogICAgICArIiZjb3VudD0iK3RoaXMuY291bnQNCiAgICAgICsiJm9mZnNldD0iK3RoaXMub2Zmc2V0LCB7aGVhZGVycyA6IHRoaXMucGVzSGVhZGVyc30pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgbGV0IHBheWxvYWQgPSByZXNwb25zZS5kYXRhLnZhbHVlLm1hcCgob2JqKT0+IHsNCiAgICAgICAgICB0aGlzLmltZ3MucHVzaChvYmouY29udGVudFVybCk7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbmV3SW1ncycsIHBheWxvYWQpDQogICAgICAgIHRoaXMuZmV0Y2hpbmcgPSBmYWxzZTsNCiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7DQogICAgICAgIHBhbmVsU2hvd24gPSB0cnVlOw0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCAoKSA9PiB7DQogICAgICB0aGlzLnNjcm9sbE5vdyA9IHdpbmRvdy5zY3JvbGxZOw0KICAgICAgaWYgKHRoaXMuc2Nyb2xsTm93ID4gdGhpcy5zY3JvbGxZKSB7DQogICAgICAgIHRoaXMucGFuZWxTaG93biA9IGZhbHNlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5wYW5lbFNob3duID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+PSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHsNCiAgICAgICAgdGhpcy5vZmZzZXQrPTI1Ow0KICAgICAgICB0aGlzLnBpY2tJbnRlcmVzdCh0aGlzLnNlbGVjdGVkSW50KTsNCiAgICAgIH0NCiAgICAgIHRoaXMuc2Nyb2xsWSA9IHRoaXMuc2Nyb2xsTm93Ow0KICAgIH0pOw0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMucGlja0ludGVyZXN0KCfQodC40YHRjNC60LgnKQ0KICB9LA0KICBtZXRhSW5mbygpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGl0bGU6ICLQmNC90YLQtdGA0LXRgdC90L7QtSINCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7IGJvdHRvbSwgc2VhcmNoUGFuZWwsIGludGVyZXN0c1BhbmVsLCBsb2FkZXIgfQ0KfTsNCg=="},{"version":3,"sources":["Interesting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Interesting.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <searchPanel :searchText=\"searchText\" v-show=\"panelShown\" />\r\n    <interestsPanel\r\n      @pickedInterest=\"pickInterest\"\r\n      :class=\"{'withPanel':panelShown}\"\r\n    />\r\n    <loader v-if=\"fetching\" />\r\n    <div v-else class=\"gallery\" :class=\"{'withPanel':panelShown}\">\r\n      <div v-for=\"(img, index) of imgs \":key=\"index\">\r\n        <img :src=\"img\" />\r\n      </div>\r\n    </div>\r\n    <bottom />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport bottom from \"@/components/Bottom.vue\";\r\nimport searchPanel from \"@/components/searchPanel.vue\";\r\nimport interestsPanel from \"@/components/interestsPanel.vue\";\r\nimport loader from \"@/components/loader.vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      scrollY: 0,\r\n      scrollNow: 0,\r\n      fetching: true,\r\n      panelShown: true,\r\n      count: 25,\r\n      selectedInt: \"\",\r\n      offset: 0,\r\n      searchText: \"Тест\",\r\n      pesHeaders: {\r\n    'Ocp-Apim-Subscription-Key' : '2037cc9985be4292a3aae7f12cafe423',\r\n    },\r\n    };\r\n  },\r\n  computed: {\r\n    imgs() {\r\n      return this.$store.getters.imgs;\r\n    }\r\n  },\r\n  methods: {\r\n    pickInterest(interest) {\r\n      this.fetching = true;\r\n      this.selectedInt = interest;\r\n      axios.get(`https://api.cognitive.microsoft.com/bing/v7.0/images/search?q=`\r\n      +encodeURIComponent(interest)\r\n      +\"&count=\"+this.count\r\n      +\"&offset=\"+this.offset, {headers : this.pesHeaders})\r\n      .then((response) => {\r\n        let payload = response.data.value.map((obj)=> {\r\n          this.imgs.push(obj.contentUrl);\r\n        });\r\n        this.$store.dispatch('newImgs', payload)\r\n        this.fetching = false;\r\n        window.scrollTo(0, document.body.clientHeight - document.documentElement.clientHeight);\r\n        panelShown = true;\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    window.addEventListener(\"scroll\", () => {\r\n      this.scrollNow = window.scrollY;\r\n      if (this.scrollNow > this.scrollY) {\r\n        this.panelShown = false;\r\n      } else {\r\n        this.panelShown = true;\r\n      }\r\n      if (window.scrollY >= document.body.clientHeight - document.documentElement.clientHeight) {\r\n        this.offset+=25;\r\n        this.pickInterest(this.selectedInt);\r\n      }\r\n      this.scrollY = this.scrollNow;\r\n    });\r\n  },\r\n  mounted() {\r\n    this.pickInterest('Сиськи')\r\n  },\r\n  metaInfo() {\r\n    return {\r\n      title: \"Интересное\"\r\n    };\r\n  },\r\n  components: { bottom, searchPanel, interestsPanel, loader }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.gallery {\r\n  margin-top: 7vh;\r\n  display: grid;\r\n  grid-auto-flow: dense;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  grid-auto-rows: 33vw;\r\n  grid-gap: 1vw 1vw;\r\n}\r\n\r\n.gallery > div > div {\r\n  height: 100%;\r\n}\r\n\r\n.gallery > div:nth-child(8n-2) {\r\n  grid-column: span 2;\r\n  grid-row: span 2;\r\n}\r\n\r\n.gallery img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.gallery.withPanel {\r\n  margin-top: 13vh;\r\n}\r\n</style>"]}]}